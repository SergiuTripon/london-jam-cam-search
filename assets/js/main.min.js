var app_id="app_id=ee84c96b",app_key="app_key=3aa60311a1e7234f876e281f65056dbe",place_types="JamCam",form_error=!1,submit_search=$("#submit-search");submit_search.click(function(e){e.preventDefault(),submit_search.html("Working on it...");var t=$("#place-name"),a=t.val();return""===a?(t.focus(),t.popover("dispose"),t.popover({html:!0,trigger:"manual",placement:"bottom",content:"<span class='text-danger'>Please enter the name of a place in London.</span>"}).popover("show"),submit_search.html("Search"),form_error=!0,!1):(t.popover("dispose"),!1===(form_error=!1)&&$.ajax({url:"https://api.tfl.gov.uk/Place/Search?name="+a+"&types="+place_types+"&"+app_id+"&"+app_key}).then(function(e){0!==e.length?(t.popover("dispose"),$(".modal-body").remove(),$(".modal-title").html(1===e.length?e.length+" Jam Cam found":e.length+" Jam Cams found"),$.each(e,function(e,t){var a=moment(new Date(t.additionalProperties[1].modified)).format("DD/MM/YYYY HH:mm:ss"),i=moment(new Date(t.additionalProperties[3].modified)).format("DD/MM/YYYY HH:mm:ss");$(".modal-header").after("<div class='modal-body'><div><table class='table table-vertical table-bordered'><tbody><tr><th class='table-active'>Place</th><td>"+t.commonName+"</td></tr><tr><th class='table-active'>Latitude</th><td>"+t.lat+"</td></tr><tr><th class='table-active'>Longitude</th><td>"+t.lon+"</td></tr><tr><th class='table-active'>Camera view</th><td>"+t.additionalProperties[3].value+"</td></tr></tbody></table></div><div class='row'><div class='col-lg-6 text-center'><figure id='image' class='figure m-0'><img src='"+t.additionalProperties[1].value+"' class='figure-img img-fluid' alt=''><figcaption class='figure-caption'>"+a+"</figcaption></figure></div><div class='col-lg-6 text-center'><figure id='video' class='figure m-0'><video class='figure-img d-block' poster='"+t.additionalProperties[1].value+"' controls width='100%' height='100%' style='width: 100%; height: 100%;'><source src='"+t.additionalProperties[2].value+"' type='video/mp4'></video><figcaption class='figure-caption'>"+i+"</figcaption></figure></div></div></div>")}),$(".modal").modal("show"),submit_search.html("Search")):(t.popover({html:!0,trigger:"manual",placement:"bottom",content:"<span class='text-danger'>We couldn't find any jam cams at or nearby this place. Please try searching for a different one.</span>"}).popover("show"),submit_search.html("Search"))}),!0)});